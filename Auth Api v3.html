<!DOCTYPE html><html lang="vi"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>AuthAPI v3.3</title><style>*{margin:0;padding:0;box-sizing:border-box}:root{--p:#6366f1;--pd:#4f46e5;--s:#8b5cf6;--g:#10b981;--w:#f59e0b;--d:#ef4444;--i:#3b82f6;--bg:#0f172a;--bg2:#1e293b;--bg3:#334155;--t:#f1f5f9;--t2:#cbd5e1;--t3:#94a3b8;--b:#334155;--sw:280px}body{font-family:'Segoe UI',sans-serif;background:var(--bg);color:var(--t);line-height:1.6}.sidebar-ov{position:fixed;inset:0;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);z-index:999;display:none;opacity:0;transition:opacity .3s}.sidebar-ov.act{display:block;opacity:1}.sidebar{position:fixed;left:0;top:0;width:var(--sw);height:100vh;background:var(--bg2);border-right:1px solid var(--b);display:flex;flex-direction:column;transition:transform .3s;z-index:1000}.logo{padding:24px;display:flex;align-items:center;gap:12px;border-bottom:1px solid var(--b)}.logo svg{width:32px;height:32px}.logo h2{font-size:20px;font-weight:700;background:linear-gradient(135deg,var(--p),var(--s));-webkit-background-clip:text;-webkit-text-fill-color:transparent}.nav{flex:1;padding:20px 0;overflow-y:auto}.nav-i{display:flex;align-items:center;gap:12px;padding:12px 24px;color:var(--t2);text-decoration:none;transition:all .3s;position:relative;cursor:pointer}.nav-i:hover{transform:translateX(6px);background:rgba(99,102,241,.12);color:var(--t)}.nav-i.act{background:rgba(99,102,241,.18);color:var(--t)}.nav-i::before{content:'';position:absolute;left:0;top:0;height:100%;width:3px;background:var(--p);transform:scaleY(0);transition:transform .3s}.nav-i.act::before{transform:scaleY(1)}.sf{padding:20px;border-top:1px solid var(--b)}.ui{display:flex;align-items:center;gap:12px;margin-bottom:12px}.ui svg{width:32px;height:32px}.ud{display:flex;flex-direction:column}.un{font-weight:600;font-size:14px}.ur{font-size:12px;color:var(--t3)}.pb{display:inline-flex;align-items:center;gap:4px;padding:2px 8px;background:linear-gradient(135deg,#f59e0b,#d97706);border-radius:12px;font-size:10px;font-weight:700;color:#fff;margin-top:4px}.lb{width:100%;padding:10px;background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.3);border-radius:8px;color:var(--d);display:flex;align-items:center;justify-content:center;gap:8px;cursor:pointer;transition:all .3s}.lb:hover{background:rgba(239,68,68,.2)}.mc{margin-left:var(--sw);min-height:100vh}.hd{background:var(--bg2);border-bottom:1px solid var(--b);padding:20px 32px;display:flex;align-items:center;gap:20px;position:sticky;top:0;z-index:100}.mt{display:none;background:none;border:none;color:var(--t);cursor:pointer;padding:8px}.ht{flex:1}.ht h1{font-size:24px;font-weight:700;margin-bottom:4px}.ht p{font-size:14px;color:var(--t3)}.ha{display:flex;gap:16px}.ni{position:relative;cursor:pointer;padding:8px}.bdg{position:absolute;top:2px;right:2px;background:var(--d);color:#fff;font-size:10px;padding:2px 5px;border-radius:10px;font-weight:600}.ca{padding:32px}.pg{display:none;opacity:0}.pg.act{display:block;animation:fiu .5s ease forwards}@keyframes fiu{from{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}.sg{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:24px;margin-bottom:32px}.sc{background:var(--bg2);border:1px solid var(--b);border-radius:12px;padding:24px;display:flex;align-items:center;gap:16px;transition:transform .3s,box-shadow .3s}.sc:hover{transform:translateY(-4px);box-shadow:0 8px 20px rgba(0,0,0,.3)}.si{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.si.bl{background:rgba(99,102,241,.15);color:var(--p)}.si.gr{background:rgba(16,185,129,.15);color:var(--g)}.si.or{background:rgba(245,158,11,.15);color:var(--w)}.si.rd{background:rgba(239,68,68,.15);color:var(--d)}.si svg{width:28px;height:28px}.sif h3{font-size:32px;font-weight:700;margin-bottom:4px}.sif p{color:var(--t3);font-size:14px}.cd{background:var(--bg2);border:1px solid var(--b);border-radius:12px;padding:32px;margin-bottom:24px}.cd h2{font-size:24px;margin-bottom:24px}.ch{display:flex;justify-content:space-between;align-items:center;margin-bottom:24px}.fm{max-width:600px}.fg{margin-bottom:20px}.fg label{display:block;margin-bottom:8px;font-weight:500;color:var(--t2)}.fg input,.fg select,.fg textarea{width:100%;padding:14px 18px;background:var(--bg3);border:2px solid var(--b);border-radius:10px;color:var(--t);font-size:15px;transition:all .3s;font-family:inherit}.fg input:focus,.fg select:focus,.fg textarea:focus{outline:none;border-color:var(--p);background:rgba(99,102,241,.05);box-shadow:0 0 0 4px rgba(99,102,241,.1);transform:translateY(-1px)}.fg input::placeholder{color:var(--t3)}.btn{padding:14px 28px;border:none;border-radius:10px;font-size:15px;font-weight:600;cursor:pointer;display:inline-flex;align-items:center;justify-content:center;gap:10px;transition:all .3s;position:relative;overflow:hidden}.btn::before{content:'';position:absolute;inset:0;background:rgba(255,255,255,.1);transform:translateX(-100%);transition:transform .3s}.btn:hover::before{transform:translateX(100%)}.btn-p{background:linear-gradient(135deg,var(--p),var(--s));color:#fff;box-shadow:0 4px 15px rgba(99,102,241,.3)}.btn-p:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(99,102,241,.4)}.btn-p:active{transform:translateY(0)}.btn-s{background:var(--bg3);color:var(--t);border:1px solid var(--b)}.btn-s:hover{background:var(--bg2)}.btn-g{background:var(--g);color:#fff}.btn-w{background:var(--w);color:#fff}.btn-d{background:var(--d);color:#fff}.btn:disabled{opacity:.5;cursor:not-allowed}.ab{padding:6px 12px;background:none;border:1px solid var(--b);border-radius:6px;color:var(--t2);cursor:pointer;font-size:12px;transition:all .3s;margin-right:8px}.ab:hover{background:var(--bg3);color:var(--t)}.ab.d:hover{background:rgba(239,68,68,.1);border-color:var(--d);color:var(--d)}.ab.g:hover{background:rgba(16,185,129,.1);border-color:var(--g);color:var(--g)}.ab.w:hover{background:rgba(245,158,11,.1);border-color:var(--w);color:var(--w)}.sb{position:relative;margin-bottom:20px}.sb svg{position:absolute;left:16px;top:50%;transform:translateY(-50%);color:var(--t3);width:20px;height:20px}.sb input{width:100%;padding:12px 16px 12px 48px;background:var(--bg3);border:1px solid var(--b);border-radius:8px;color:var(--t)}.tc{overflow-x:auto}.kt{width:100%;border-collapse:collapse}.kt thead{background:var(--bg3)}.kt th{padding:16px;text-align:left;font-weight:600;color:var(--t2);border-bottom:1px solid var(--b)}.kt td{padding:16px;border-bottom:1px solid var(--b)}.kt tbody tr{transition:background .3s}.kt tbody tr:hover{background:rgba(99,102,241,.05)}.stb{padding:4px 12px;border-radius:20px;font-size:12px;font-weight:600;display:inline-block}.stb.act{background:rgba(16,185,129,.15);color:var(--g)}.stb.exp{background:rgba(239,68,68,.15);color:var(--d)}.stb.exg{background:rgba(245,158,11,.15);color:var(--w)}.stb.pm{background:linear-gradient(135deg,rgba(245,158,11,.2),rgba(217,119,6,.2));color:var(--w)}.stb.bn{background:rgba(239,68,68,.15);color:var(--d)}.stb.lk{background:rgba(100,116,139,.15);color:var(--t3)}.md{position:fixed;inset:0;background:rgba(0,0,0,.95);display:none;align-items:center;justify-content:center;z-index:2000;opacity:0;transition:opacity .3s}.md.sh{display:flex;opacity:1}.mdc{background:var(--bg2);border:1px solid var(--b);border-radius:16px;padding:40px;max-width:400px;width:90%;box-shadow:0 20px 60px rgba(0,0,0,.5)}.mh{text-align:center;margin-bottom:32px}.mh h2{font-size:28px;margin-bottom:8px}.mh p{color:var(--t3)}.mfg{margin-bottom:20px}.mfg label{display:block;margin-bottom:8px;font-weight:600;color:var(--t2)}.mfg input{width:100%;padding:14px;background:var(--bg3);border:2px solid var(--b);border-radius:10px;color:var(--t);font-size:15px;transition:all .3s}.mfg input:focus{outline:none;border-color:var(--p);background:rgba(99,102,241,.05);box-shadow:0 0 0 3px rgba(99,102,241,.15)}.mb{width:100%;padding:16px;background:linear-gradient(135deg,var(--p),var(--s));border:none;border-radius:10px;color:#fff;font-size:15px;font-weight:700;cursor:pointer;transition:all .3s;margin-top:8px}.mb:hover{transform:translateY(-2px);box-shadow:0 8px 25px rgba(99,102,241,.4)}.mf{text-align:center;margin-top:20px;padding-top:20px;border-top:1px solid var(--b)}.mf a{color:var(--p);cursor:pointer;font-weight:600}.mf a:hover{text-decoration:underline}.al{padding:15px;border-radius:8px;margin:10px 0}.al-i{background:#d1ecf1;color:#0c5460;border-left:4px solid var(--i)}.al-w{background:rgba(245,158,11,.1);border-left:4px solid var(--w);color:var(--w)}.lw{background:rgba(245,158,11,.1);border:2px solid var(--w);border-radius:12px;padding:16px;margin-bottom:24px;display:flex;align-items:center;gap:12px}.lw svg{color:var(--w);flex-shrink:0;width:24px;height:24px}.lw p{color:var(--t2);font-size:14px}.ckc{max-width:900px;margin:0 auto}.ckcd{background:var(--bg2);border:1px solid var(--b);border-radius:16px;padding:40px;margin-bottom:32px}.chp{display:flex;align-items:center;gap:20px;margin-bottom:32px;padding-bottom:24px;border-bottom:1px solid var(--b)}.hi{width:64px;height:64px;background:linear-gradient(135deg,var(--p),var(--s));border-radius:16px;display:flex;align-items:center;justify-content:center;color:#fff}.hi svg{width:32px;height:32px}.htx h2{font-size:24px;margin-bottom:8px}.htx p{color:var(--t3)}.pf{display:flex;flex-direction:column;gap:24px}.fs{display:flex;flex-direction:column;gap:16px}.sl{font-size:14px;font-weight:700;text-transform:uppercase;letter-spacing:1px;color:var(--t2)}.ktg{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:20px}.ktc{cursor:pointer;position:relative}.ktc input[type="radio"]{display:none}.ktct{display:flex;align-items:center;gap:16px;padding:20px;background:var(--bg3);border:3px solid var(--b);border-radius:16px;transition:all .3s}.ktc input[type="radio"]:checked+.ktct{border-color:var(--p);background:rgba(99,102,241,.1);box-shadow:0 0 0 4px rgba(99,102,241,.1)}.ktc:hover .ktct{border-color:rgba(99,102,241,.5)}.kti{width:56px;height:56px;border-radius:12px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.kti.st{background:rgba(59,130,246,.15);color:var(--i)}.kti.pr{background:linear-gradient(135deg,rgba(139,92,246,.2),rgba(236,72,153,.2));color:var(--s)}.kti svg{width:28px;height:28px}.ktif{flex:1}.ktif h3{font-size:16px;font-weight:700;margin-bottom:4px}.ktif p{font-size:13px;color:var(--t3)}.ktck{width:28px;height:28px;border:3px solid var(--b);border-radius:50%;display:flex;align-items:center;justify-content:center;color:transparent;transition:all .3s}.ktc input[type="radio"]:checked~.ktct .ktck{border-color:var(--p);background:var(--p);color:#fff}.ktck svg{width:16px;height:16px}.fr{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:24px}.fgp{display:flex;flex-direction:column;gap:12px}.fgp label{display:flex;align-items:center;gap:8px;font-weight:600;color:var(--t2);font-size:14px}.fgp label svg{width:20px;height:20px}.iwp{position:relative}.iwp input{width:100%;padding:16px 80px 16px 20px;background:var(--bg3);border:2px solid var(--b);border-radius:12px;color:var(--t);font-size:18px;font-weight:600;transition:all .3s}.iwp input:focus{outline:none;border-color:var(--p);background:rgba(99,102,241,.05);box-shadow:0 0 0 4px rgba(99,102,241,.1)}.isf{position:absolute;right:20px;top:50%;transform:translateY(-50%);color:var(--t3);font-size:14px;font-weight:600;pointer-events:none}.bcp{width:100%;padding:20px 32px;background:linear-gradient(135deg,var(--p),var(--s));border:none;border-radius:14px;color:#fff;font-size:16px;font-weight:700;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:12px;margin-top:16px;box-shadow:0 8px 30px rgba(99,102,241,.4);transition:all .3s;text-transform:uppercase;letter-spacing:1.5px}.bcp:hover{transform:translateY(-4px);box-shadow:0 12px 40px rgba(99,102,241,.5)}.bcp:active{transform:translateY(-2px)}.bcp svg{width:24px;height:24px}.rcp{background:linear-gradient(145deg,rgba(16,185,129,.1),rgba(5,150,105,.05));border:3px solid var(--g);border-radius:20px;padding:40px;box-shadow:0 8px 32px rgba(16,185,129,.2);animation:siu .5s ease}@keyframes siu{from{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}.rh{text-align:center;margin-bottom:32px}.ri{width:72px;height:72px;background:linear-gradient(135deg,var(--g),#059669);border-radius:50%;display:flex;align-items:center;justify-content:center;margin:0 auto 20px;color:#fff;animation:si .5s cubic-bezier(.34,1.56,.64,1) .2s both}@keyframes si{from{transform:scale(0)}to{transform:scale(1)}}.ri svg{width:40px;height:40px}.rh h3{font-size:24px;color:var(--g);margin-bottom:8px}.rh p{color:var(--t3)}.kdp{margin-bottom:28px}.kl{font-size:12px;text-transform:uppercase;letter-spacing:1px;color:var(--t3);margin-bottom:12px;font-weight:600}.kcw{display:flex;align-items:center;gap:12px;background:var(--bg);padding:20px 24px;border-radius:12px;border:2px solid rgba(16,185,129,.3)}.kcw code{flex:1;font-size:20px;font-weight:700;color:var(--g);letter-spacing:1px}.bcop{display:flex;align-items:center;gap:8px;padding:10px 20px;background:rgba(16,185,129,.15);border:2px solid var(--g);border-radius:8px;color:var(--g);font-weight:600;cursor:pointer;transition:all .3s}.bcop:hover{background:rgba(16,185,129,.25);transform:translateY(-2px)}.bcop svg{width:20px;height:20px}.kdg{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:16px}.di{display:flex;align-items:center;gap:16px;padding:16px;background:rgba(16,185,129,.05);border:1px solid rgba(16,185,129,.2);border-radius:12px}.dii{width:48px;height:48px;border-radius:10px;display:flex;align-items:center;justify-content:center;flex-shrink:0}.dii.bl{background:rgba(59,130,246,.15);color:var(--i)}.dii.or{background:rgba(245,158,11,.15);color:var(--w)}.dii.gr{background:rgba(16,185,129,.15);color:var(--g)}.dii svg{width:24px;height:24px}.dic{display:flex;flex-direction:column;gap:4px}.dl{font-size:12px;color:var(--t3);text-transform:uppercase;letter-spacing:.5px}.dv{font-size:16px;font-weight:700;color:var(--t)}@media(max-width:768px){:root{--sw:280px}.sidebar{transform:translateX(-100%)}.sidebar.act{transform:translateX(0)}.mc{margin-left:0}.mt{display:block}.sg{grid-template-columns:1fr}.ca{padding:16px}.cd{padding:20px}.mdc{padding:30px 20px}.ckcd{padding:24px}.chp{flex-direction:column;align-items:flex-start}.ktg{grid-template-columns:1fr}.fr{grid-template-columns:1fr}.kdg{grid-template-columns:1fr}}</style></head><body><div class="sidebar-ov" id="so" onclick="closeSidebar()"></div><div class="sidebar" id="sb"><div class="logo"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2L2 7l10 5 10-5-10-5z"/><path d="M2 17l10 5 10-5M2 12l10 5 10-5"/></svg><h2>AuthAPI v3.3</h2></div><nav class="nav" id="nv"></nav><div class="sf"><div class="ui"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="4"/><path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"/></svg><div class="ud"><span class="un" id="sun">Guest</span><span class="ur" id="sur">Not logged in</span><span id="pbs"></span></div></div><button class="lb" onclick="logout()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4M16 17l5-5-5-5M21 12H9"/></svg>ƒêƒÉng Xu·∫•t</button></div></div><div class="mc"><header class="hd"><button class="mt" onclick="toggleSidebar()"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="18" x2="21" y2="18"/></svg></button><div class="ht"><h1 id="pt">Trang Ch·ªß</h1><p id="ps">H·ªá th·ªëng qu·∫£n l√Ω key v3.3</p></div><div class="ha"><div class="ni"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9M13.73 21a2 2 0 0 1-3.46 0"/></svg><span class="bdg" id="nb">0</span></div></div></header><div class="ca"><div class="pg act" id="pg-db"><div class="sg" id="ust"></div><div class="cd" id="rkc" style="display:none"><h2>Key G·∫ßn ƒê√¢y</h2><div class="tc"><table class="kt"><thead><tr><th>Key</th><th>Lo·∫°i</th><th>T·∫°o</th><th>HSD</th><th>TB</th><th>TT</th></tr></thead><tbody id="rkt"></tbody></table></div></div></div><div class="pg" id="pg-ck"><div class="ckc"><div id="lwb"></div><div class="ckcd"><div class="chp"><div class="hi"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m6.36 6.36l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m6.36-6.36l4.24-4.24"/></svg></div><div class="htx"><h2>T·∫°o Key M·ªõi</h2><p>T·∫°o key x√°c th·ª±c cho ·ª©ng d·ª•ng</p></div></div><form id="ckf" class="pf"><div class="fs"><label class="sl">Lo·∫°i Key</label><div class="ktg"><label class="ktc"><input type="radio" name="kt" value="HXT" checked><div class="ktct"><div class="kti pr"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg></div><div class="ktif"><h3>Ho√†ng Xu√¢n T√∫</h3><p>2 Thi·∫øt B·ªã</p></div><div class="ktck"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></div></div></label></div></div><div class="fs" id="ckf2"><label class="sl">Custom Key</label><input type="text" id="cki" placeholder="VD: MYAPP-2025-KEY" maxlength="50"></div><div class="fs"><label class="sl">üè∑Ô∏è T√™n/Alias Key</label><input type="text" id="keyAlias" placeholder="VD: C√¥ng ty A - Server 1" maxlength="100"></div><div class="fr"><div class="fgp"><label>S·ªë L∆∞·ª£ng</label><div class="iwp"><input type="number" id="qty" min="1" value="1" required><span class="isf">keys</span></div></div><div style="display:grid;grid-template-columns:2fr 1fr;gap:12px;align-items:flex-end"><div class="fgp"><label>Th·ªùi L∆∞·ª£ng</label><input type="number" id="duration" min="1" value="30" required style="width:100%;padding:16px 18px;background:var(--bg3);border:2px solid var(--b);border-radius:10px;color:var(--t);font-size:15px"></div><div class="fgp"><label>Ki·ªÉu Th·ªùi L∆∞·ª£ng</label><select id="durationType" style="width:100%;padding:16px 18px;background:var(--bg3);border:2px solid var(--b);border-radius:10px;color:var(--t);font-size:15px"><option value="hour">Gi·ªù</option><option value="day" selected>Ng√†y</option><option value="week">Tu·∫ßn</option><option value="month">Th√°ng</option></select></div></div></div><div style="display:flex;align-items:center;gap:12px;padding:16px;background:rgba(99,102,241,.05);border:1px solid rgba(99,102,241,.2);border-radius:10px;margin-bottom:16px"><input type="checkbox" id="autoDelete" style="width:18px;height:18px;cursor:pointer"><label for="autoDelete" style="margin:0;cursor:pointer;color:var(--t2);font-weight:500">T·ª± ƒë·ªông x√≥a key khi h·∫øt h·∫°n</label></div><button type="submit" class="bcp"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m6.36 6.36l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m6.36-6.36l4.24-4.24"/></svg>T·∫°o Key</button></form></div><div id="ckr" class="rcp" style="display:none"><div class="rh"><div class="ri"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></div><h3>Key ƒê√£ T·∫°o! üéâ</h3><p>Key c·ªßa b·∫°n ƒë√£ s·∫µn s√†ng</p></div><div class="kdp"><div class="kl">Key Code</div><div class="kcw"><code id="nkc"></code><button class="bcop" onclick="copyKey()"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>Copy</button></div></div><div class="kdg"><div class="di"><div class="dii bl"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></div><div class="dic"><span class="dl">Lo·∫°i</span><span class="dv" id="nkt"></span></div></div><div class="di"><div class="dii or"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg></div><div class="dic"><span class="dl">HSD</span><span class="dv" id="nke"></span></div></div><div class="di"><div class="dii gr"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="7" width="20" height="14" rx="2"/><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"/></svg></div><div class="dic"><span class="dl">TB</span><span class="dv" id="nkd"></span></div></div></div></div></div></div><div class="pg" id="pg-mk"><div class="cd"><div class="ch"><h2>Key C·ªßa T√¥i</h2><button class="btn btn-s" onclick="loadMyKeys()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/></svg>T·∫£i L·∫°i</button></div><div class="sb"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg><input type="text" id="smk" placeholder="T√¨m key..."></div><div class="tc"><table class="kt"><thead><tr><th>Key</th><th>T√™n</th><th></th>Lo·∫°i</th><th>T·∫°o</th><th>HSD</th><th>TB</th><th>Verify</th><th>TT</th><th>Action</th></tr></thead><tbody id="mkt"></tbody></table></div></div></div><div class="pg" id="pg-ad"><div class="sg" id="ast"></div><div class="cd"><div class="ch"><h2>Qu·∫£n Tr·ªã H·ªá Th·ªëng</h2><button class="btn btn-s" onclick="createBackup()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4M7 10l5 5 5-5M12 15V3"/></svg>Backup</button></div><div class="fm"><div class="fg"><label>Maintenance Mode</label><select id="mm" onchange="toggleMaintenance()"><option value="false">T·∫Øt</option><option value="true">B·∫≠t</option></select></div><div class="fg"><label>Cho ph√©p ƒëƒÉng k√Ω</label><select id="re" onchange="toggleReg()"><option value="true">B·∫≠t</option><option value="false">T·∫Øt</option></select></div><div class="fg"><label>Th·ªùi h·∫°n key t·ªëi ƒëa (ng√†y)</label><input type="number" id="mkd" value="365" min="1"></div><button class="btn btn-p" onclick="saveSettings()">L∆∞u C√†i ƒê·∫∑t</button></div></div></div><div class="pg" id="pg-ak"><div class="cd"><div class="ch"><h2>T·∫•t C·∫£ Key</h2><div><button class="btn btn-s" onclick="loadAllKeys()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/></svg>T·∫£i L·∫°i</button><button class="btn btn-p" onclick="showBulkCreate()" style="margin-left:8px"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/></svg>Bulk Create</button></div></div><div class="sb"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg><input type="text" id="sk" placeholder="T√¨m..."></div><div class="tc"><table class="kt"><thead><tr><th>Key</th><th>Owner</th><th>Lo·∫°i</th><th>T·∫°o</th><th>HSD</th><th>TB</th><th>Verify</th><th>TT</th><th>Action</th></tr></thead><tbody id="akt"></tbody></table></div></div></div><div class="pg" id="pg-au"><div class="cd"><div class="ch"><h2>Qu·∫£n L√Ω User</h2><button class="btn btn-s" onclick="loadUsers()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/></svg>T·∫£i L·∫°i</button></div><div class="sb"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.35-4.35"/></svg><input type="text" id="su" placeholder="T√¨m user..."></div><div class="tc"><table class="kt"><thead><tr><th>User</th><th>Email</th><th>Keys</th><th>Total Verify</th><th>TT</th><th>Ng√†y</th><th>Action</th></tr></thead><tbody id="aut"></tbody></table></div></div></div><div class="pg" id="pg-lg"><div class="cd"><div class="ch"><h2>Activity Logs</h2><button class="btn btn-s" onclick="loadLogs()"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/></svg>T·∫£i L·∫°i</button></div><div class="tc"><table class="kt"><thead><tr><th>Th·ªùi gian</th><th>User</th><th>H√†nh ƒë·ªông</th><th>Chi ti·∫øt</th></tr></thead><tbody id="lgt"></tbody></table></div></div></div><div class="pg" id="pg-st"><div class="al al-i"><div class="cd"><p style="margin-bottom:12px"><strong>B∆∞·ªõc 1:</strong> ƒêƒÉng k√Ω t√†i kho·∫£n v√† l·∫•y API Code t·∫°i ph·∫ßn C√†i ƒê·∫∑t</p><p style="margin-bottom:12px"><strong>B∆∞·ªõc 2:</strong> T·∫°o key v·ªõi lo·∫°i v√† th·ªùi h·∫°n ph√π h·ª£p</p><p style="margin-bottom:12px"><strong>B∆∞·ªõc 3:</strong> T√≠ch h·ª£p v√†o app c·ªßa b·∫°n</p></div><div style="margin:20px 0"><h3 style="color:var(--p);margin-bottom:16px">üîå API Endpoint</h3><div style="background:var(--bg3);padding:16px;border-radius:8px;margin-bottom:12px"><strong>POST /api/verify-key</strong><br><small>X√°c th·ª±c key (public endpoint)</small><pre style="background:rgba(0,0,0,.2);padding:12px;border-radius:6px;margin-top:8px;overflow-x:auto"><code>{
  "key": "ZXS-ABC123-XYZ",
  "device_id": "unique-device-id",
  "api_code": "API-YOUR-CODE" // Optional
}</code></pre></div><div style="background:var(--bg3);padding:16px;border-radius:8px"><strong>Response Success:</strong><pre style="background:rgba(0,0,0,.2);padding:12px;border-radius:6px;margin-top:8px;overflow-x:auto"><code>{
  "success": true,
  "message": "X√°c th·ª±c th√†nh c√¥ng",
  "type": "ZXS",
  "expires_at": "2026-03-05T10:30:00Z",
  "devices_remaining": 2,
  "is_premium_key": false
}</code></pre></div></div><div style="margin:20px 0"><h3 style="color:var(--p);margin-bottom:16px">üíª Code Examples</h3><div style="background:var(--bg3);padding:16px;border-radius:8px;margin-bottom:12px"><strong>C# Example:</strong><pre style="background:rgba(0,0,0,.2);padding:12px;border-radius:6px;margin-top:8px;overflow-x:auto"><code>var data = new {
    key = "ZXS-ABC123-XYZ",
    device_id = GetDeviceId(),
    api_code = "API-YOUR-CODE"
};
var response = await client.PostAsync(
    "https://api.hoangxuantu.com/api/verify-key",
    new StringContent(JsonConvert.SerializeObject(data))
);
var result = await response.Content.ReadAsStringAsync();
if (result.Contains("\"success\":true")) {
    // ‚úÖ Key valid - Allow access
} else {
    // ‚ùå Key invalid - Block access
}</code></pre></div><div style="background:var(--bg3);padding:16px;border-radius:8px;margin-bottom:12px"><strong>Python Example:</strong><pre style="background:rgba(0,0,0,.2);padding:12px;border-radius:6px;margin-top:8px;overflow-x:auto"><code>import requests
data = {
    "key": "ZXS-ABC123-XYZ",
    "device_id": get_device_id(),
    "api_code": "API-YOUR-CODE"
}
r = requests.post("https://api.hoangxuantu.com/api/verify-key", json=data)
if r.json()["success"]:
    # ‚úÖ Key valid
    print("Access granted!")
else:
    # ‚ùå Key invalid
    print("Access denied!")</code></pre></div><div style="background:var(--bg3);padding:16px;border-radius:8px"><strong>JavaScript Example:</strong><pre style="background:rgba(0,0,0,.2);padding:12px;border-radius:6px;margin-top:8px;overflow-x:auto"><code>const response = await fetch('https://bucac.onrender.com/api/verify-key', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({
        key: 'ZXS-ABC123-XYZ',
        device_id: getDeviceId(),
        api_code: 'API-YOUR-CODE'
    })
});
const data = await response.json();
if (data.success) {
    // ‚úÖ Key valid
    console.log('Access granted!');
} else {
    // ‚ùå Key invalid
    console.log('Access denied!');
}</code></pre></div></div><div style="margin:20px 0"><h3 style="color:var(--p);margin-bottom:16px">üîí Security Notes</h3><ul style="margin-left:25px;line-height:2.2"><li>‚úÖ API Code: Optional (t·∫•t c·∫£ users)</li><li>‚úÖ M·ªói device c√≥ device_id duy nh·∫•t</li><li>‚úÖ Key ki·ªÉm tra HMAC signature ƒë·ªÉ ch·ªëng gi·∫£ m·∫°o</li><li>‚úÖ Auto expire khi h·∫øt h·∫°n</li><li>‚úÖ Device limit - gi·ªõi h·∫°n s·ªë thi·∫øt b·ªã</li><li>‚úÖ T·∫•t c·∫£ users c√≥ quy·ªÅn unlimited - Kh√¥ng ph√¢n bi·ªát tier</li></ul></div><div class="al al-w"><strong>üìû C·∫ßn h·ªó tr·ª£?</strong> Li√™n h·ªá admin t·∫°i ph·∫ßn <strong>Li√™n H·ªá</strong></div></div></div><div class="pg" id="pg-ct"><div class="cd"><h2>üìû Li√™n H·ªá</h2><div style="margin-top:24px"><div class="al al-i"><strong>‚úÖ FREE System:</strong> T·∫°o key kh√¥ng gi·ªõi h·∫°n, t·∫°o custom key, bulk create cho t·∫•t c·∫£!</div><div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin-top:24px"><div style="padding:24px;background:var(--bg3);border-radius:12px;border:2px solid var(--p)"><h3 style="margin-bottom:12px;display:flex;align-items:center;gap:8px"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M22 12c0-5.52-4.48-10-10-10S2 6.48 2 12c0 4.84 3.44 8.87 8 9.8V15H8v-3h2V9.5C10 7.57 11.57 6 13.5 6H16v3h-2c-.55 0-1 .45-1 1v2h3v3h-3v6.95c5.05-.5 9-4.76 9-9.95z"/></svg>Facebook</h3><p style="color:var(--t3);margin-bottom:12px">Admin Facebook</p><a href="https://www.facebook.com/duc.pham.396384" target="_blank" class="btn btn-p" style="width:100%;margin:0">Li√™n h·ªá ngay</a></div><div style="padding:24px;background:var(--bg3);border-radius:12px;border:2px solid var(--i)"><h3 style="margin-bottom:12px;display:flex;align-items:center;gap:8px"><svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69.01-.03.01-.14-.07-.2-.08-.06-.19-.04-.27-.02-.12.03-1.99 1.27-5.62 3.73-.53.36-1.01.54-1.44.53-.47-.01-1.38-.27-2.05-.49-.82-.27-1.47-.42-1.42-.88.03-.24.37-.48 1.02-.73 4-1.74 6.68-2.88 8.03-3.44 3.82-1.58 4.61-1.85 5.13-1.86.11 0 .37.03.54.17.14.11.18.26.2.37.01.06.03.24.01.38z"/></svg>Telegram</h3><p style="color:var(--t3);margin-bottom:12px">@phamcduc0</p><a href="https://t.me/phamcduc0" target="_blank" class="btn btn-p" style="width:100%;margin:0">Chat ngay</a></div><div style="padding:24px;background:var(--bg3);border-radius:12px;border:2px solid var(--d)"><h3 style="margin-bottom:12px;display:flex;align-items:center;gap:8px"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="4" width="20" height="16" rx="2"/><path d="m2 7 10 7 10-7"/></svg>Email</h3><p style="color:var(--t3);margin-bottom:12px">monhpham15@gmail.com</p><a href="mailto:monhpham15@gmail.com" class="btn btn-p" style="width:100%;margin:0">G·ª≠i email</a></div></div><div style="margin-top:32px;padding:24px;background:linear-gradient(135deg,var(--g),#059669);border-radius:12px;color:#fff"><h3 style="margin-bottom:16px;font-size:24px">‚úÖ T·∫•t C·∫£ Users - Quy·ªÅn Unlimited</h3><ul style="margin-left:25px;line-height:2.2"><li>‚úÖ T·∫°o key <strong>KH√îNG GI·ªöI H·∫†N</strong></li><li>‚úÖ T·∫°o <strong>Custom Key</strong> (t·ª± ƒë·∫∑t t√™n)</li><li>‚úÖ <strong>Bulk Create</strong> (1-100 keys c√πng l√∫c)</li><li>‚úÖ <strong>Key Alias</strong> (ƒë·∫∑t t√™n cho key)</li><li>‚úÖ <strong>Auto Delete</strong> (x√≥a t·ª± ƒë·ªông khi h·∫øt h·∫°n)</li><li>‚úÖ <strong>T·∫•t c·∫£ t√≠nh nƒÉng cho t·∫•t c·∫£ users - Kh√¥ng ph√¢n bi·ªát!</strong></li></ul><p style="margin-top:20px;font-size:18px;font-weight:700">üéâ Kh√¥ng c√≥ VIP/Premium - B√¨nh ƒë·∫≥ng cho t·∫•t c·∫£!</p></div></div></div></div><div class="pg" id="pg-st"><div class="cd"><h2>C√†i ƒê·∫∑t</h2><div style="margin-top:24px"><div style="padding:16px;background:var(--bg3);border-radius:8px;margin-bottom:16px"><p style="color:var(--t3);margin-bottom:4px">API URL</p><p style="font-weight:600">https://api.hoangxuantu.com/api</p></div><div style="padding:16px;background:var(--bg3);border-radius:8px;margin-bottom:16px"><p style="color:var(--t3);margin-bottom:4px">Version</p><p style="font-weight:600">v3.3.0</p></div><div style="padding:16px;background:var(--bg3);border-radius:8px;margin-bottom:16px"><p style="color:var(--t3);margin-bottom:8px">API Code C·ªßa B·∫°n</p><p style="font-weight:600;font-size:18px;color:var(--p)" id="myapi">‚Äî</p><button class="btn btn-w" onclick="resetAPICode()" style="margin-top:12px"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21.5 2v6h-6M2.5 22v-6h6M2 11.5a10 10 0 0 1 18.8-4.3M22 12.5a10 10 0 0 1-18.8 4.2"/></svg>Reset API Code</button></div><div class="al al-w"><strong>L∆∞u √Ω:</strong> API Code l√† t√πy ch·ªçn cho t·∫•t c·∫£ users - kh√¥ng b·∫Øt bu·ªôc khi verify key</div></div></div></div></div></div><div class="md" id="am"><div class="mdc"><div id="lfc"><div class="mh"><h2>ƒêƒÉng Nh·∫≠p</h2><p>Ch√†o m·ª´ng tr·ªü l·∫°i!</p></div><form id="lf"><div class="mfg"><label>Username</label><input type="text" id="lu" placeholder="Username" required autocomplete="username"></div><div class="mfg"><label>Password</label><input type="password" id="lp" placeholder="Password" required autocomplete="current-password"></div><button type="submit" class="mb">ƒêƒÉng Nh·∫≠p</button></form><div class="mf"><p>Ch∆∞a c√≥ TK? <a onclick="showReg()">ƒêƒÉng k√Ω</a></p></div></div><div id="rfc" style="display:none"><div class="mh"><h2>ƒêƒÉng K√Ω</h2><p>T·∫°o t√†i kho·∫£n m·ªõi</p></div><div class="al al-w"><strong>L∆∞u √Ω:</strong> M·ªói thi·∫øt b·ªã t·ªëi ƒëa 3 t√†i kho·∫£n. T·∫•t c·∫£ t√†i kho·∫£n t·∫°o key kh√¥ng gi·ªõi h·∫°n - Ho√†n to√†n FREE!</div><form id="rf"><div class="mfg"><label>Username</label><input type="text" id="ru" placeholder="T·ªëi thi·ªÉu 3 k√Ω t·ª±" required autocomplete="username"></div><div class="mfg"><label>Email</label><input type="email" id="re" placeholder="your@email.com" required autocomplete="email"></div><div class="mfg"><label>Password</label><input type="password" id="rp" placeholder="T·ªëi thi·ªÉu 6 k√Ω t·ª±" required autocomplete="new-password"></div><button type="submit" class="mb">ƒêƒÉng K√Ω</button></form><div class="mf"><p>ƒê√£ c√≥ TK? <a onclick="showLog()">ƒêƒÉng nh·∫≠p</a></p></div></div></div></div><div class="md" id="bcm" style="display:none"><div class="mdc" style="max-width:600px"><div class="mh"><h2>Bulk Create Keys</h2><p>T·∫°o nhi·ªÅu key c√πng l√∫c</p></div><form id="bcf"><div class="fg"><label>S·ªë l∆∞·ª£ng (1-100)</label><input type="number" id="bcn" min="1" max="100" value="10" required></div><div class="fg"><label>Lo·∫°i Key</label><select id="bct"><option value="HXT" selected>Ho√†ng Xu√¢n T√∫</option></select></div><div class="fg"><label>Th·ªùi h·∫°n (ng√†y)</label><input type="number" id="bcd" min="1" value="30" required></div><div class="fg"><label>S·ªë thi·∫øt b·ªã</label><input type="number" id="bcv" min="1" value="1" required></div><button type="submit" class="btn btn-p" style="width:100%"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m6.36 6.36l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m6.36-6.36l4.24-4.24"/></svg>T·∫°o Keys</button><button type="button" class="btn btn-s" style="width:100%;margin-top:8px" onclick="closeBulk()">H·ªßy</button></form><div id="bcr" style="display:none;margin-top:24px"><div style="background:rgba(16,185,129,.1);border:2px solid var(--g);border-radius:12px;padding:20px"><h3 style="color:var(--g);margin-bottom:12px;display:flex;align-items:center;gap:8px"><svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg>T·∫°o th√†nh c√¥ng <span id="bcc">0</span> keys!</h3><div style="max-height:300px;overflow-y:auto;background:var(--bg);padding:16px;border-radius:8px;margin:12px 0"><code id="bck" style="white-space:pre-wrap;font-size:13px;line-height:1.8;color:var(--t)"></code></div><button class="btn btn-p" onclick="copyAllKeys()" style="width:100%"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>Copy T·∫•t C·∫£ Keys</button></div></div></div></div><div class="md" id="etm"><div class="mdc" style="max-width:600px"><div class="mh"><h2>Ch·ªânh S·ª≠a Th·ªùi Gian</h2><p>C·∫≠p nh·∫≠t th·ªùi gian h·∫øt h·∫°n c·ªßa key</p></div><form id="etf"><div style="padding:16px;background:var(--bg3);border-radius:8px;margin-bottom:16px"><p style="color:var(--t3);margin-bottom:8px;font-weight:600">Th·ªùi gian hi·ªán t·∫°i</p><p id="etd" style="font-size:18px;color:var(--p);font-weight:700">‚Äî</p></div><div class="fg"><label>Ng√†y</label><input type="number" id="etdn" min="1" max="31" required></div><div class="fg"><label>Th√°ng</label><input type="number" id="etmo" min="1" max="12" required></div><div class="fg"><label>NƒÉm</label><input type="number" id="etye" min="2025" max="2100" required></div><div class="fg"><label>Gi·ªù</label><input type="number" id="eth" min="0" max="23" required></div><div class="fg"><label>Ph√∫t</label><input type="number" id="etmi" min="0" max="59" required></div><div class="fg"><label>Gi√¢y</label><input type="number" id="etse" min="0" max="59" required></div><button type="submit" class="btn btn-p" style="width:100%"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg>C·∫≠p nh·∫≠t Th·ªùi gian</button><button type="button" class="btn btn-s" style="width:100%;margin-top:8px" onclick="closeEditTime()">H·ªßy</button></form></div></div><script>const API='https://api.hoangxuantu.com/api';let tk=null,cu=null,ck=[],au=[];document.addEventListener('DOMContentLoaded',()=>{checkAuth();initEvents()});function checkAuth(){tk=localStorage.getItem('tk');const ud=localStorage.getItem('ud');if(!tk||!ud){showAuth();return}try{cu=JSON.parse(ud);hideAuth();initApp()}catch(e){showAuth()}}function initApp(){updateSB();updateNav();loadDB()}function updateSB(){document.getElementById('sun').textContent=cu.username;document.getElementById('sur').textContent=cu.role==='admin'?'Admin':'User';const pb=document.getElementById('pbs');pb.innerHTML=''}function updateNav(){const n=document.getElementById('nv');if(cu.role==='admin'){n.innerHTML='<a href="#" class="nav-i act" data-page="ad"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg><span>Dashboard</span></a><a href="#" class="nav-i" data-page="ck"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m6.36 6.36l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m6.36-6.36l4.24-4.24"/></svg><span>T·∫°o Key</span></a><a href="#" class="nav-i" data-page="au"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2M9 11a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM23 21v-2a4 4 0 0 0-3-3.87M16 3.13a4 4 0 0 1 0 7.75"/></svg><span>Users</span></a><a href="#" class="nav-i" data-page="ak"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg><span>Keys</span></a><a href="#" class="nav-i" data-page="lg"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><line x1="16" y1="13" x2="8" y2="13"/><line x1="16" y1="17" x2="8" y2="17"/><line x1="10" y1="9" x2="8" y2="9"/></svg><span>Logs</span></a><a href="#" class="nav-i" data-page="st"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m6.36 6.36l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m6.36-6.36l4.24-4.24"/></svg><span>C√†i ƒê·∫∑t</span></a>'}else{n.innerHTML='<a href="#" class="nav-i act" data-page="db"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"/><rect x="14" y="3" width="7" height="7"/><rect x="14" y="14" width="7" height="7"/><rect x="3" y="14" width="7" height="7"/></svg><span>Trang Ch·ªß</span></a><a href="#" class="nav-i" data-page="ck"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m6.36 6.36l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m6.36-6.36l4.24-4.24"/></svg><span>T·∫°o Key</span></a><a href="#" class="nav-i" data-page="mk"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg><span>My Keys</span></a><a href="#" class="nav-i" data-page="st"><svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"/><path d="M12 1v6m0 6v6M5.64 5.64l4.24 4.24m6.36 6.36l4.24 4.24M1 12h6m6 0h6M5.64 18.36l4.24-4.24m6.36-6.36l4.24-4.24"/></svg><span>C√†i ƒê·∫∑t</span></a>'}document.querySelectorAll('.nav-i').forEach(i=>{i.addEventListener('click',function(e){e.preventDefault();navTo(this.dataset.page)})})}function initEvents(){document.getElementById('lf')?.addEventListener('submit',handleLogin);document.getElementById('rf')?.addEventListener('submit',handleReg);document.getElementById('ckf')?.addEventListener('submit',handleCK);document.getElementById('bcf')?.addEventListener('submit',handleBulk);document.getElementById('smk')?.addEventListener('input',e=>filterMK(e.target.value));document.getElementById('sk')?.addEventListener('input',e=>filterAK(e.target.value));document.getElementById('su')?.addEventListener('input',e=>filterU(e.target.value));document.getElementById('ckf2').style.display='block';setDefaultCreateKeyDate()}function showAuth(){const m=document.getElementById('am');m.style.display='flex';setTimeout(()=>m.classList.add('sh'),10)}function hideAuth(){const m=document.getElementById('am');m.classList.remove('sh');setTimeout(()=>m.style.display='none',400)}function showLog(){document.getElementById('rfc').style.display='none';document.getElementById('lfc').style.display='block'}function showReg(){document.getElementById('lfc').style.display='none';document.getElementById('rfc').style.display='block'}async function handleLogin(e){e.preventDefault();const u=document.getElementById('lu').value,p=document.getElementById('lp').value;if(u==='admin'){try{const r=await fetch(`${API}/admin-login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:u,password:p})});const d=await r.json();if(d.success){tk=d.token;localStorage.setItem('tk',tk);cu={username:'admin',role:'admin'};localStorage.setItem('ud',JSON.stringify(cu));hideAuth();notif('ƒêƒÉng nh·∫≠p Admin OK','g');initApp()}else{notif('Sai m·∫≠t kh·∫©u!','d')}}catch{notif('L·ªói k·∫øt n·ªëi!','d')}return}try{const r=await fetch(`${API}/login`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:u,password:p})});const d=await r.json();if(d.success){tk=d.token;localStorage.setItem('tk',tk);cu={username:d.user.username,email:d.user.email,keyCount:d.user.keyCount,role:'user',apiCode:d.user.apiCode};localStorage.setItem('ud',JSON.stringify(cu));hideAuth();notif('ƒêƒÉng nh·∫≠p OK!','g');initApp()}else{notif(d.message||'L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function handleReg(e){e.preventDefault();const u=document.getElementById('ru').value,em=document.getElementById('re').value,p=document.getElementById('rp').value;try{const r=await fetch(`${API}/register`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({username:u,email:em,password:p})});const d=await r.json();if(d.success){notif('ƒêƒÉng k√Ω OK! ƒêƒÉng nh·∫≠p.','g');showLog();if(d.apiCode){notif(`API Code: ${d.apiCode}`,'i')}}else{notif(d.message||'L·ªói!','d')}}catch{notif('L·ªói!','d')}}function navTo(p){const sb=document.getElementById('sb'),ov=document.getElementById('so');if(window.innerWidth<=768){sb.classList.remove('act');ov.classList.remove('act')}document.querySelectorAll('.nav-i').forEach(i=>i.classList.remove('act'));const ci=document.querySelector(`[data-page="${p}"]`);if(ci)ci.classList.add('act');document.querySelectorAll('.pg').forEach(pg=>pg.classList.remove('act'));const tp=document.getElementById(`pg-${p}`);if(tp)setTimeout(()=>tp.classList.add('act'),50);const tt={'db':{t:'Trang Ch·ªß',s:'T·ªïng quan'},'ck':{t:'T·∫°o Key',s:'T·∫°o key m·ªõi'},'mk':{t:'My Keys',s:'Qu·∫£n l√Ω key'},'ad':{t:'Admin Dashboard',s:'T·ªïng quan'},'au':{t:'Users',s:'Qu·∫£n l√Ω user'},'ak':{t:'All Keys',s:'T·∫•t c·∫£ key'},'lg':{t:'Activity Logs',s:'L·ªãch s·ª≠ ho·∫°t ƒë·ªông'},'st':{t:'Settings',s:'C√†i ƒë·∫∑t'}};const pi=tt[p]||{t:'Home',s:''};document.getElementById('pt').textContent=pi.t;document.getElementById('ps').textContent=pi.s;if(p==='db'||p==='ad')loadDB();else if(p==='mk')loadMyKeys();else if(p==='ak')loadAllKeys();else if(p==='au')loadUsers();else if(p==='lg')loadLogs();else if(p==='ck')checkLim();else if(p==='st')loadAPI()}function toggleSidebar(){document.getElementById('sb').classList.toggle('act');document.getElementById('so').classList.toggle('act')}function closeSidebar(){document.getElementById('sb').classList.remove('act');document.getElementById('so').classList.remove('act')}async function loadDB(){if(cu.role==='admin')await loadAD();else await loadUD()}async function loadUD(){try{const r=await fetch(`${API}/my-stats`,{headers:{'Authorization':`Bearer ${tk}`}});const s=await r.json();const h=`<div class="sc"><div class="si bl"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></div><div class="sif"><h3>${s.totalKeys}</h3><p>T·ªïng Key</p></div></div><div class="sc"><div class="si gr"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></div><div class="sif"><h3>${s.activeKeys}</h3><p>Active</p></div></div><div class="sc"><div class="si or"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"/><path d="M12 6v6l4 2"/></svg></div><div class="sif"><h3>${s.keysRemaining}</h3><p>C√≤n L·∫°i</p></div></div><div class="sc">`;document.getElementById('ust').innerHTML=h;const kr=await fetch(`${API}/my-keys`,{headers:{'Authorization':`Bearer ${tk}`}});const k=await kr.json();const rc=k.slice(-5).reverse();if(rc.length>0){document.getElementById('rkc').style.display='block';dispRK(rc)}else{document.getElementById('rkc').style.display='none'}}catch{}}async function loadAD(){try{const r=await fetch(`${API}/admin/stats`,{headers:{'Authorization':`Bearer ${tk}`}});const s=await r.json();const h=`<div class="sc"><div class="si bl"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="8" r="4"/><path d="M6 21v-2a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v2"/></svg></div><div class="sif"><h3>${s.totalUsers}</h3><p>Users</p></div></div><div class="sc"><div class="si gr"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><polyline points="20 6 9 17 4 12"/></svg></div><div class="sif"><h3>${s.activeUsers}</h3><p>Active</p></div></div><div class="sc"><div class="sc"><div class="si rd"><svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="11" width="18" height="11" rx="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg></div><div class="sif"><h3>${s.totalKeys}</h3><p>Keys</p></div></div>`;document.getElementById('ast').innerHTML=h;const cfg=await fetch(`${API}/admin/settings`,{headers:{'Authorization':`Bearer ${tk}`}});const st=await cfg.json();document.getElementById('mm').value=st.maintenance_mode?'true':'false';document.getElementById('re').value=st.registration_enabled?'true':'false';document.getElementById('mkd').value=st.max_key_days||365}catch{}}function dispRK(k){const tb=document.getElementById('rkt');tb.innerHTML='';const nw=new Date();k.forEach(x=>{const ex=new Date(x.expires_at);let sc='act',st='Active';if(ex<=nw){sc='exp';st='Expired'}const r=document.createElement('tr');r.innerHTML=`<td><code style="color:var(--p)">${x.key_code}</code></td><td><span class="stb ${x.type==='HXT'?'pm':'act'}">${x.type}</span></td><td>${fmt(x.created_at)}</td><td>${fmt(x.expires_at)}</td><td>${x.devices?.length||0}/${x.allowed_devices}</td><td><span class="stb ${sc}">${st}</span></td>`;tb.appendChild(r)})}async function checkLim(){document.getElementById('lwb').innerHTML='';if(cu.role==='user'){try{const r=await fetch(`${API}/my-stats`,{headers:{'Authorization':`Bearer ${tk}`}});const s=await r.json();if(s.success){document.getElementById('lwb').innerHTML=`<div class="al al-i"><strong>‚úÖ T√†i kho·∫£n c·ªßa b·∫°n:</strong> ${cu.username} - Quy·ªÅn t·∫°o key <strong>kh√¥ng gi·ªõi h·∫°n</strong> (${s.totalKeys} keys hi·ªán t·∫°i)</div>`}else{document.getElementById('lwb').innerHTML=''}}catch{document.getElementById('lwb').innerHTML=''}}}function setDefaultCreateKeyDate(){document.getElementById('qty').value=1;document.getElementById('duration').value=30;document.getElementById('durationType').value='day';document.getElementById('pkgSelect').value='';document.getElementById('autoDelete').checked=false;document.getElementById('keyAlias').value='';document.getElementById('cki').value='';}async function handleCK(e){e.preventDefault();const ty=document.querySelector('input[name="kt"]:checked').value,qty=parseInt(document.getElementById('qty').value),duration=parseInt(document.getElementById('duration').value),durationType=document.getElementById('durationType').value,autoDelete=document.getElementById('autoDelete').checked,cki=document.getElementById('cki').value.trim(),alias=document.getElementById('keyAlias').value.trim(),dv=2;if(isNaN(qty)||isNaN(duration)||qty<1||duration<1){notif('Gi√° tr·ªã kh√¥ng h·ª£p l·ªá!','d');return}let days=duration;switch(durationType){case'hour':days=Math.ceil(duration/24);break;case'week':days=duration*7;break;case'month':days=duration*30;break;case'day':default:days=duration;break}if(days>365){notif('Th·ªùi h·∫°n t·ªëi ƒëa 365 ng√†y!','d');return}try{const body={type:ty,days:days,devices:dv,quantity:qty};if(autoDelete){body.autoDelete=true}if(cki){body.customKey=cki}if(qty===1){const r=await fetch(`${API}/create-key`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({type:ty,days:days,devices:dv,customKey:cki,name:alias})});const dt=await r.json();if(dt.success){showCK(dt.key);notif('T·∫°o key OK!','g');document.getElementById('ckf').reset();setDefaultCreateKeyDate();if(cu.role!=='admin'){cu.keyCount++;localStorage.setItem('ud',JSON.stringify(cu))}loadDB()}else{notif(dt.message||'L·ªói!','d')}}else{const r=await fetch(`${API}/bulk-create-keys`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({count:qty,type:ty,days:days,devices:dv,name:alias})});const dt=await r.json();if(dt.success){const keys=dt.keys.map(k=>k.key_code).join('\n');document.getElementById('bck').textContent=keys;document.getElementById('bcc').textContent=dt.keys.length;document.getElementById('bcr').style.display='block';document.getElementById('bcf').style.display='none';document.getElementById('bcm').style.display='flex';document.getElementById('bcm').classList.add('sh');notif(`T·∫°o ${qty} keys OK!`,'g');document.getElementById('ckf').reset();setDefaultCreateKeyDate();if(cu.role!=='admin'){cu.keyCount+=qty;localStorage.setItem('ud',JSON.stringify(cu))}loadDB()}else{notif(dt.message||'L·ªói!','d')}}}catch{notif('L·ªói!','d')}}function showCK(k){const b=document.getElementById('ckr');b.style.display='block';document.getElementById('nkc').textContent=k.key_code;document.getElementById('nkt').textContent=k.type;document.getElementById('nke').textContent=fmt(k.expires_at);document.getElementById('nkd').textContent=`${k.devices?.length||0}/${k.allowed_devices}`;setTimeout(()=>b.scrollIntoView({behavior:'smooth'}),100)}function copyKey(){const c=document.getElementById('nkc').textContent;navigator.clipboard.writeText(c).then(()=>notif('Copied!','g')).catch(()=>notif('L·ªói copy!','d'))}async function loadMyKeys(){try{const r=await fetch(`${API}/my-keys`,{headers:{'Authorization':`Bearer ${tk}`}});const k=await r.json();ck=k;dispMK(k)}catch{notif('L·ªói!','d')}}function dispMK(k){const tb=document.getElementById('mkt');tb.innerHTML='';if(!k||k.length===0){tb.innerHTML='<tr><td colspan="8" style="text-align:center;padding:40px;color:var(--t3)">Ch∆∞a c√≥ key</td></tr>';return}const nw=new Date();k.forEach(x=>{const ex=new Date(x.expires_at);let sc='act',st='Active';if(ex<=nw){sc='exp';st='Expired'}const r=document.createElement('tr');r.innerHTML=`<td><code style="color:var(--p)">${x.key_code}</code>${x.is_custom?'<span class="stb pm" style="margin-left:4px">Custom</span>':''}</td><td><strong>${x.alias||'N/A'}</strong></td><td><span class="stb ${x.type==='HXT'?'pm':'act'}">${x.type}</span></td><td>${fmt(x.created_at)}</td><td>${fmt(x.expires_at)}</td><td>${x.devices?.length||0}/${x.allowed_devices}</td><td>${x.total_verifications||0}</td><td><span class="stb ${sc}">${st}</span></td><td><button class="ab" onclick="openEditTime('${x.key_code}')">Ch·ªânh s·ª≠a TG</button><button class="ab" onclick="rstKey('${x.key_code}')">Reset</button><button class="ab" onclick="getKeyInfo('${x.key_code}')">Info</button><button class="ab d" onclick="delKey('${x.key_code}')">X√≥a</button></td>`;tb.appendChild(r)})}function filterMK(t){if(!t){dispMK(ck);return}const f=ck.filter(x=>x.key_code.toLowerCase().includes(t.toLowerCase()));dispMK(f)}async function loadAllKeys(){try{const r=await fetch(`${API}/list-keys`,{headers:{'Authorization':`Bearer ${tk}`}});const k=await r.json();ck=k;dispAK(k)}catch{notif('L·ªói!','d')}}function dispAK(k){const tb=document.getElementById('akt');tb.innerHTML='';if(!k||k.length===0){tb.innerHTML='<tr><td colspan="9" style="text-align:center;padding:40px;color:var(--t3)">Ch∆∞a c√≥ key</td></tr>';return}const nw=new Date();k.forEach(x=>{const ex=new Date(x.expires_at);let sc='act',st='Active';if(ex<=nw){sc='exp';st='Expired'}const r=document.createElement('tr');r.innerHTML=`<td><code style="color:var(--p)">${x.key_code}</code>${x.is_custom?'<span class="stb pm" style="margin-left:4px">Custom</span>':''}</td><td>${x.owner_username||'?'}</td><td><span class="stb ${x.type==='HXT'?'pm':'act'}">${x.type}</span></td><td>${fmt(x.created_at)}</td><td>${fmt(x.expires_at)}</td><td>${x.devices?.length||0}/${x.allowed_devices}</td><td>${x.total_verifications||0}</td><td><span class="stb ${sc}">${st}</span></td><td><button class="ab" onclick="openEditTime('${x.key_code}')">Ch·ªânh s·ª≠a TG</button><button class="ab" onclick="rstKey('${x.key_code}')">Reset</button><button class="ab" onclick="getKeyInfo('${x.key_code}')">Info</button><button class="ab d" onclick="delKey('${x.key_code}')">X√≥a</button></td>`;tb.appendChild(r)})}function filterAK(t){if(!t){dispAK(ck);return}const f=ck.filter(x=>x.key_code.toLowerCase().includes(t.toLowerCase())||x.owner_username?.toLowerCase().includes(t.toLowerCase()));dispAK(f)}async function loadUsers(){try{const r=await fetch(`${API}/admin/users`,{headers:{'Authorization':`Bearer ${tk}`}});const u=await r.json();au=u;dispU(u)}catch{notif('L·ªói!','d')}}function dispU(u){const tb=document.getElementById('aut');tb.innerHTML='';if(!u||u.length===0){tb.innerHTML='<tr><td colspan="7" style="text-align:center;padding:40px;color:var(--t3)">Ch∆∞a c√≥ user</td></tr>';return}u.forEach(x=>{const sc=x.isBanned?'bn':x.isActive?'act':'lk';const st=x.isBanned?'Banned':x.isActive?'Active':'Locked';const r=document.createElement('tr');r.innerHTML=`<td>${x.username}</td><td>${x.email}</td><td>${x.keyCount}</td><td>${x.totalVerifications||0}</td><td><span class="stb ${sc}">${st}</span></td><td>${fmt(x.createdAt)}</td><td><button class="ab ${x.isBanned?'g':'w'}" onclick="${x.isBanned?'unB':'banU'}('${x.id}')">${x.isBanned?'Unban':'Ban'}</button><button class="ab ${x.isActive?'w':'g'}" onclick="togA('${x.id}')">${x.isActive?'Lock':'Unlock'}</button><button class="ab d" onclick="delU('${x.id}')">X√≥a</button></td>`;tb.appendChild(r)})}function filterU(t){if(!t){dispU(au);return}const f=au.filter(x=>x.username.toLowerCase().includes(t.toLowerCase())||x.email.toLowerCase().includes(t.toLowerCase()));dispU(f)}async function grtP(id){if(!confirm('C·∫•p VIP?'))return;try{const r=await fetch(`${API}/admin/grant-premium`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({userId:id})});const d=await r.json();if(d.success){notif('C·∫•p VIP OK!','g');loadUsers()}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function revP(id){if(!confirm('Thu h·ªìi VIP?'))return;try{const r=await fetch(`${API}/admin/revoke-premium`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({userId:id})});const d=await r.json();if(d.success){notif('Thu h·ªìi OK!','g');loadUsers()}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function banU(id){if(!confirm('Ban?'))return;try{const r=await fetch(`${API}/admin/ban-user`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({userId:id})});const d=await r.json();if(d.success){notif('Ban OK!','g');loadUsers()}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function unB(id){if(!confirm('Unban?'))return;try{const r=await fetch(`${API}/admin/unban-user`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({userId:id})});const d=await r.json();if(d.success){notif('Unban OK!','g');loadUsers()}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function togA(id){try{const r=await fetch(`${API}/admin/toggle-active`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({userId:id})});const d=await r.json();if(d.success){notif(d.message,'g');loadUsers()}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function delU(id){if(!confirm('X√ìA user?'))return;try{const r=await fetch(`${API}/admin/delete-user`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({userId:id})});const d=await r.json();if(d.success){notif('X√≥a OK!','g');loadUsers()}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function extKey(kc){const d=prompt('Gia h·∫°n bao nhi√™u ng√†y?','30');if(!d||isNaN(d)||+d<1)return;try{const r=await fetch(`${API}/extend-key`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({key:kc,days:+d})});const dt=await r.json();if(dt.success){notif('Gia h·∫°n OK!','g');cu.role==='admin'?loadAllKeys():loadMyKeys();loadDB()}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function rstKey(kc){if(!confirm(`Reset ${kc}?`))return;try{const r=await fetch(`${API}/reset-key`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({key:kc})});const d=await r.json();if(d.success){notif('Reset OK!','g');cu.role==='admin'?loadAllKeys():loadMyKeys()}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function delKey(kc){if(!confirm(`X√≥a ${kc}?`))return;try{const r=await fetch(`${API}/delete-key`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({key:kc})});const d=await r.json();if(d.success){notif('X√≥a OK!','g');cu.role==='admin'?loadAllKeys():loadMyKeys();if(cu.role!=='admin'&&cu.keyCount>0){cu.keyCount--;localStorage.setItem('ud',JSON.stringify(cu))}loadDB()}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function getKeyInfo(kc){try{const r=await fetch(`${API}/key-info`,{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({key:kc})});const d=await r.json();if(d.success){const i=d.info;alert(`üìã Key Info:\n\nType: ${i.type}\nCreated: ${fmt(i.created_at)}\nExpires: ${fmt(i.expires_at)}\nStatus: ${i.is_expired?'Expired':'Active'}\nDays remaining: ${i.days_remaining}\nDevices: ${i.devices_used}/${i.devices_allowed}\nTotal verifications: ${i.total_verifications}\nLast verified: ${i.last_verified}\nCustom key: ${i.is_custom?'Yes':'No'}\nRequire API Code: ${i.require_api_key?'Yes':'No'}`)}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function loadLogs(){try{const r=await fetch(`${API}/admin/logs?limit=50`,{headers:{'Authorization':`Bearer ${tk}`}});const logs=await r.json();const tb=document.getElementById('lgt');tb.innerHTML='';if(!logs||logs.length===0){tb.innerHTML='<tr><td colspan="4" style="text-align:center;padding:40px;color:var(--t3)">Ch∆∞a c√≥ logs</td></tr>';return}logs.forEach(l=>{const row=document.createElement('tr');row.innerHTML=`<td>${fmt(l.timestamp)}</td><td>${l.username}</td><td><span class="stb act">${l.action}</span></td><td>${JSON.stringify(l.details).substring(0,100)}</td>`;tb.appendChild(row)})}catch{notif('L·ªói!','d')}}function showBulkCreate(){document.getElementById('bcm').style.display='flex';setTimeout(()=>document.getElementById('bcm').classList.add('sh'),10)}function closeBulk(){const m=document.getElementById('bcm');m.classList.remove('sh');setTimeout(()=>{m.style.display='none';document.getElementById('bcf').style.display='block';document.getElementById('bcr').style.display='none';document.getElementById('bcf').reset()},300)}async function handleBulk(e){e.preventDefault();const cnt=parseInt(document.getElementById('bcn').value),ty=document.getElementById('bct').value,d=parseInt(document.getElementById('bcd').value),dv=parseInt(document.getElementById('bcv').value);if(cnt<1||cnt>100){notif('S·ªë l∆∞·ª£ng 1-100!','d');return}try{const r=await fetch(`${API}/bulk-create-keys`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({count:cnt,type:ty,days:d,devices:dv})});const dt=await r.json();if(dt.success){const keys=dt.keys.map(k=>k.key_code).join('\n');document.getElementById('bck').textContent=keys;document.getElementById('bcc').textContent=dt.keys.length;document.getElementById('bcr').style.display='block';document.getElementById('bcf').style.display='none';notif(`T·∫°o ${cnt} keys OK!`,'g');loadAllKeys();loadDB()}else{notif(dt.message||'L·ªói!','d')}}catch{notif('L·ªói!','d')}}function copyAllKeys(){const keys=document.getElementById('bck').textContent;navigator.clipboard.writeText(keys).then(()=>notif(`Copied ${keys.split('\n').length} keys!`,'g')).catch(()=>notif('L·ªói copy!','d'))}let edtKey='';function openEditTime(kc){edtKey=kc;const m=document.getElementById('etm');m.style.display='flex';setTimeout(()=>m.classList.add('sh'),10);const now=new Date();let ek=null;if(cu.role==='admin'){if(ck&&ck.length>0)ek=ck.find(k=>k.key_code===kc)}else{if(ck&&ck.length>0)ek=ck.find(k=>k.key_code===kc)}if(ek){const ex=new Date(ek.expires_at);const y=ex.getFullYear(),mo=String(ex.getMonth()+1).padStart(2,'0'),d=String(ex.getDate()).padStart(2,'0'),h=String(ex.getHours()).padStart(2,'0'),mi=String(ex.getMinutes()).padStart(2,'0'),se=String(ex.getSeconds()).padStart(2,'0');document.getElementById('etd').textContent=`${d}/${mo}/${y} ${h}:${mi}:${se}`;document.getElementById('etdn').value=ex.getDate();document.getElementById('etmo').value=ex.getMonth()+1;document.getElementById('etye').value=ex.getFullYear();document.getElementById('eth').value=ex.getHours();document.getElementById('etmi').value=ex.getMinutes();document.getElementById('etse').value=ex.getSeconds()}else{const y=now.getFullYear(),mo=String(now.getMonth()+1).padStart(2,'0'),d=String(now.getDate()+30).padStart(2,'0'),h=String(now.getHours()).padStart(2,'0'),mi=String(now.getMinutes()).padStart(2,'0'),se=String(now.getSeconds()).padStart(2,'0');document.getElementById('etdn').value=parseInt(d);document.getElementById('etmo').value=parseInt(mo);document.getElementById('etye').value=y;document.getElementById('eth').value=parseInt(h);document.getElementById('etmi').value=parseInt(mi);document.getElementById('etse').value=parseInt(se)}}function closeEditTime(){const m=document.getElementById('etm');m.classList.remove('sh');setTimeout(()=>{m.style.display='none';document.getElementById('etf').reset()},300)}async function handleEditTime(e){e.preventDefault();const d=parseInt(document.getElementById('etdn').value),mo=parseInt(document.getElementById('etmo').value),ye=parseInt(document.getElementById('etye').value),h=parseInt(document.getElementById('eth').value),mi=parseInt(document.getElementById('etmi').value),se=parseInt(document.getElementById('etse').value);if(d<1||d>31||mo<1||mo>12||ye<2025||h<0||h>23||mi<0||mi>59||se<0||se>59){notif('Gi√° tr·ªã kh√¥ng h·ª£p l·ªá!','d');return}const newDate=new Date(ye,mo-1,d,h,mi,se);const now=new Date();if(newDate<=now){notif('Th·ªùi gian ph·∫£i l·ªõn h∆°n th·ªùi gian hi·ªán t·∫°i!','d');return}try{const r=await fetch(`${API}/set-key-expire`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({key:edtKey,expires_at:newDate.toISOString()})});const dt=await r.json();if(dt.success){notif('C·∫≠p nh·∫≠t th·ªùi gian OK!','g');closeEditTime();cu.role==='admin'?loadAllKeys():loadMyKeys();loadDB()}else{const days=Math.ceil((newDate-new Date())/(1000*60*60*24));const r2=await fetch(`${API}/extend-key`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({key:edtKey,days:days})});const dt2=await r2.json();if(dt2.success){notif('C·∫≠p nh·∫≠t th·ªùi gian OK!','g');closeEditTime();cu.role==='admin'?loadAllKeys():loadMyKeys();loadDB()}else{notif(dt.message||'L·ªói!','d')}}}catch{notif('L·ªói!','d')}}document.getElementById('etf')?.addEventListener('submit',handleEditTime);async function createBackup(){try{const r=await fetch(`${API}/admin/backup`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`}});const d=await r.json();if(d.success){notif('Backup OK!','g')}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function toggleMaintenance(){const v=document.getElementById('mm').value==='true';try{const r=await fetch(`${API}/admin/settings`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({maintenance_mode:v})});const d=await r.json();if(d.success){notif('C·∫≠p nh·∫≠t OK!','g')}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function toggleReg(){const v=document.getElementById('re').value==='true';try{const r=await fetch(`${API}/admin/settings`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({registration_enabled:v})});const d=await r.json();if(d.success){notif('C·∫≠p nh·∫≠t OK!','g')}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function saveSettings(){const mkd=parseInt(document.getElementById('mkd').value);if(mkd<1){notif('S·ªë ng√†y kh√¥ng h·ª£p l·ªá!','d');return}try{const r=await fetch(`${API}/admin/settings`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`,'Content-Type':'application/json'},body:JSON.stringify({max_key_days:mkd})});const d=await r.json();if(d.success){notif('L∆∞u OK!','g')}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}async function resetAPICode(){if(!confirm('Reset API Code? T·∫•t c·∫£ key s·∫Ω c·∫ßn code m·ªõi!'))return;try{const r=await fetch(`${API}/reset-api-code`,{method:'POST',headers:{'Authorization':`Bearer ${tk}`}});const d=await r.json();if(d.success){cu.apiCode=d.newApiCode;localStorage.setItem('ud',JSON.stringify(cu));document.getElementById('myapi').textContent=d.newApiCode;notif('Reset OK!','g')}else{notif('L·ªói!','d')}}catch{notif('L·ªói!','d')}}function logout(){localStorage.removeItem('tk');localStorage.removeItem('ud');tk=null;cu=null;showAuth();notif('ƒê√£ logout!','i')}function notif(m,t='i'){const c={'g':'var(--g)','d':'var(--d)','i':'var(--i)','w':'var(--w)'};const e=document.createElement('div');e.textContent=m;e.style.cssText=`position:fixed;top:24px;right:24px;z-index:9999;padding:16px 24px;border-radius:8px;color:#fff;background:${c[t]||'var(--p)'};box-shadow:0 4px 12px rgba(0,0,0,.4);animation:si .4s ease,fdo .4s 2.8s forwards;font-weight:500`;document.body.appendChild(e);setTimeout(()=>e.remove(),3200)}function fmt(s){if(!s)return '‚Äî';const d=new Date(s);return d.toLocaleString('vi-VN',{day:'2-digit',month:'2-digit',year:'numeric',hour:'2-digit',minute:'2-digit'})}async function loadAPI(){if(cu.role==='user'&&cu.apiCode){document.getElementById('myapi').textContent=cu.apiCode}}</script></body></html>